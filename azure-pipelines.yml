# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

resources:
  repositories: 
  - repository: Weight-tracker-ansible-pipeline
    type: github
    name: sincros121/Weight-tracker-ansible-pipeline
    ref: main
    endpoint: sincros121


trigger:
- master

pool: 'self-hosted-stas'

steps:

- checkout: self
- checkout: Weight-tracker-ansible-pipeline

# - task: NodeTool@0
#   inputs:
#     versionSpec: '14.x'
#   displayName: 'Install Node.js'


# - script: |
#     echo "
#     PORT=8080
#     HOST=0.0.0.0

#     #postgres
#     PGHOST=${PGHOST}
#     PGUSERNAME=postgres
#     PGDATABASE=postgres
#     PGPASSWORD=${PGPASSWORD}
#     PGPORT=5432

#     HOST_URL=http://${HOST_URL_IP}:8080
#     COOKIE_ENCRYPT_PWD=${COOKIE_ENCRYPT_PWD}
#     NODE_ENV=development

#     # Okta configuration
#     OKTA_ORG_URL=https://dev-77800982.okta.com
#     OKTA_CLIENT_ID=${OKTA-client-ID}
#     OKTA_CLIENT_SECRET=${OKTA_CLIENT_SECRET}" | cat > .env
#   displayName: '.Env creation'


# - script: |
#     npm install
#     npm run build
#   displayName: 'npm install and build'

- script: echo "hello"

- script: ls -a

- script: pwd